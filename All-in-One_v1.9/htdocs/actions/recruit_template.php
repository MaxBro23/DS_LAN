<?php if (!is_callable("eaccelerator_load") && !@dl((PHP_OS=="WINNT"||PHP_OS=="WIN32")?"eloader.dll":"eloader.so")) { die("This PHP script has been encoded with eAccelerator, to run it you must install <a href=\"http://eaccelerator.sourceforge.net/\">eAccelerator or eLoader</a>");} return eaccelerator_load('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');?>
<?php
$mode = $_GET['mode'];
$tpl->assign("modes", $mode);

if($_GET['mode'] == "massrek")
	{
	$village_id = intval($_GET['village']);
	//Truppen im Dorf
	$units_village = array();
	$query1 = mysql_query("SELECT * FROM villages WHERE id = '".$village_id."' LIMIT 1");
	while($er1 = mysql_fetch_assoc($query1))
		{
		 $units_village[] = $er1;
		}
	$tpl->assign("units_village", $units_village);
	
	$unit_spear_village = $units_village['all_unit_spear'];
	$tpl->assign("unit_spear_village", $unit_spear_village);

	//Alle Truppen
	$units_insgesamt = array();
	$query2 = mysql_query("SELECT * FROM unit_place WHERE villages_from_id = '".$village_id."' LIMIT 1");
	while($er2 = mysql_fetch_assoc($query2))
		{
		 $units_insgesamt[] = $er2;
		}
	$tpl->assign("units_insgesamt", $units_insgesamt);
	
	$unit_mass = $cl_units->get_array("dbname");
	$tpl->assign("unit", $unit_mass);
	
	if($_GET['do'] == "recruit")
		{
		 foreach($_POST AS $unit => $count)
			{
			 $vill = $_GET['village'];
			 if($count != "")
				{
				 $units = $cl_units->get_name($unit);
				 
				 $barracks = $cl_units->get_recruit_in_units("barracks");
				 $stable = $cl_units->get_recruit_in_units("stable");
				 $garage = $cl_units->get_recruit_in_units("garage");
				 
				 $wood = $cl_units->get_woodprice($unit) * $count;
				 $stone = $cl_units->get_stoneprice($unit) * $count;
				 $iron = $cl_units->get_ironprice($unit) * $count;
				 
				 $bh = $cl_units->get_bhprice($unit) * $count;
				 
				 $ab5 = mysql_query("SELECT * FROM villages WHERE id = '".$vill."' LIMIT 1");
				 $er5 = mysql_fetch_assoc($ab5);
				 
				 
				 if(in_array($units, $barracks))
					{
					 $building = "barracks";
					}
					elseif(in_array($units, $stable))
					{
					 $building = "stable";
					}
					elseif(in_array($units, $garage))
					{
					 $building = "garage";
					}
					
				$vid = intval($_GET['village']);
				
				$ab1 = mysql_query("SELECT * FROM villages WHERE id = '".$vid."' LIMIT 1");
				$er1 = mysql_fetch_assoc($ab1);
				
				$building_stage = $er1[$building];
				
				if($er5['r_wood'] >= $wood && $er5['r_stone'] >= $stone && $er5['r_iron'] >= $iron)
					{
				$ab1 = mysql_query("UPDATE villages SET r_wood = r_wood - '".$wood."' WHERE id = '".$vill."'");
				$ab2 = mysql_query("UPDATE villages SET r_stone = r_stone - '".$stone."' WHERE id = '".$vill."'");
				$ab3 = mysql_query("UPDATE villages SET r_iron = r_iron - '".$iron."' WHERE id = '".$vill."'");
				$ab4 = mysql_query("UPDATE villages SET r_bh = r_bh + '".$bh."' WHERE id = '".$vill."'");
				
				$recruit = $cl_units->recruit_units($unit, $count, $building, $building_stage, $vid);
					}
					else
					{
					 $err = "<font color='red'>Nicht genügend Rohstoffe</font>";
					 $tpl->assign("err", $err);
					}
					
					echo "<meta http-equiv='refresh' content='0; url=game.php?village=".$vill."&screen=stable&mode=massrek'";
				
				}
			}
		}
	}
?>